(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{7698:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verifymail",function(){return n(5211)}])},8143:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/firenation.a9623954.gif",height:384,width:640}},5211:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(4051),s=n.n(r),a=n(5893),i=n(6301),o=n(3892),c=n.n(o),u=n(6358),h=n.n(u),l=n(1408),d=n(7294);function p(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){p(a,r,s,i,o,"next",e)}function o(e){p(a,r,s,i,o,"throw",e)}i(void 0)}))}}function f(){var e=(0,d.useState)({token:"",action:""}),t=e[0],r=e[1],o=(0,d.useState)(void 0),u=o[0],p=o[1],f=(0,d.useState)(!1),b=f[0],y=f[1];(0,d.useEffect)((function(){var e=new URL(window.location);r({token:e.searchParams.get("token"),action:e.searchParams.get("a")}),history.replaceState(null,"If this shows up in your browser history, contact support@kartonrad.de",e.origin+e.pathname+e.hash)}),[]),console.log(t);var j=t.action;function v(){return g.apply(this,arguments)}function g(){return(g=m(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch(i.J+"/verifymail/"+t.action,{method:"post",body:"token="+encodeURIComponent(t.token),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}});case 3:r=e.sent,console.log(r),e.t0=r.status,e.next=200===e.t0?8:422===e.t0?10:401===e.t0?12:403===e.t0?14:500===e.t0?16:18;break;case 8:return p("verify"===j?(0,a.jsxs)("p",{children:["DONE \u2705",(0,a.jsx)("br",{}),"You can now close this tab!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"They better be prepared \ud83d\ude08"}),(0,a.jsx)("img",{src:n(8143),alt:"fire nation image",style:{width:"120%"}}),(0,a.jsxs)("p",{children:["(In this very moment, their account is being scronched)",(0,a.jsx)("br",{}),"(You can now close this tab)"]})]})),e.abrupt("break",18);case 10:return p((0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:"There is something wrong here...\nDOn'T play games with me"})),e.abrupt("break",18);case 12:return p((0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:"You're unauthorized to do that...\nEither the token expired,\n the user was already deleted,\n or the token is forged"})),e.abrupt("break",18);case 14:return p((0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:"The User has since changed their email adress,\nOR he has already verified this adress.\n\nYou need to jump through the normal hoops,\nshould you want to delete it. "})),e.abrupt("break",18);case 16:return p((0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:"Woopsie poopsie there was a server error\nmy bad"})),e.abrupt("break",18);case 18:y(!1);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsx)(l.A,{title:"Discussion",disablePopup:!0,children:(0,a.jsx)("div",{className:c().card+" "+h().registerForm,style:{flexDirection:"column",padding:"3em",borderRadius:"4em",margin:"auto",width:"max-content"},children:u?(0,a.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:u}):"verify"===j?(0,a.jsx)(x,{act:v,l:b}):"delete"===j?(0,a.jsx)(w,{act:v,l:b}):(0,a.jsx)("p",{children:"Wait a sec.."})})})}function w(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"Revenge \ud83d\ude20"}),(0,a.jsxs)("p",{children:["Someone really commited crimes in your name, huh?",(0,a.jsx)("br",{}),"Do you want to delete their account to clear your name?"]}),(0,a.jsx)("p",{children:"If not, just close this Tab!"}),(0,a.jsx)("div",{className:h().destructiveButton,children:(0,a.jsx)("button",{className:h().baseButton,onClick:e.act,disabled:e.l,children:"BURN IT \ud83d\udd25"})})]})}function x(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{children:"Confirm"}),(0,a.jsx)("p",{children:"Just click one more time..."}),(0,a.jsx)("p",{children:"If you changed your mind, just close this Tab!"}),(0,a.jsx)("div",{className:h().submitButton,children:(0,a.jsx)("button",{type:"submit",onClick:e.act,disabled:e.l,children:"Verify \u2705"})})]})}}},function(e){e.O(0,[445,937,228,249,373,949,607,408,774,888,179],(function(){return t=7698,e(e.s=t);var t}));var t=e.O();_N_E=t}]);