{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.9a6bc93f425d064c7c1d.hot-update.js","sources":["webpack:///./components/ProfileForm.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { useIdentity } from \"../hooks/identity\"\r\nimport s from \"../style/form.module.sass\"\r\nimport { Modal } from \"./layout/Modal\";\r\nimport { DropdownItem } from \"./MultilevelMenu\";\r\nimport { MdSettings as SettingsIcon} from \"react-icons/md\";\r\nimport { FallbackImg, FallbackImgImg } from \"./FallbackImg\";\r\nimport { EyeOnMount, EyePlaceholder } from \"./layout/EyeOfJudgement\";\r\n\r\nexport function ProfileForm(props) {\r\n    const [id, axios] = useIdentity();\r\n    const [u, setU] = useState({});\r\n    const [changes, setChanges] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(id.active!== null) update();\r\n    }, [id]);\r\n    function update() {\r\n        axios.get(\"/user/me\").then((res) => {\r\n            setU(res.data);\r\n        }).catch();\r\n    }\r\n    function onChange(evt) {\r\n        var {name, value} = evt.target;\r\n        setChanges((prev)=> {\r\n            var lol = {...prev};\r\n            lol[name] = value;\r\n            if(!value)\r\n                delete lol[name];\r\n            return lol;\r\n        })\r\n    }\r\n    async function onSubmit(evt) {\r\n        evt.preventDefault();\r\n        setLoading(true);\r\n        try {\r\n            var res = await axios.put(\"/user/me\", changes);\r\n            setLoading(false);\r\n            reset();\r\n            update();\r\n        } catch {\r\n            setLoading(false);\r\n        }\r\n    }\r\n    function reset(evt) {\r\n        setChanges({});\r\n        if(evt) evt.preventDefault();\r\n    }\r\n\r\n    return <form className={s.form} onSubmit={onSubmit} style={{position: \"relative\"}}>\r\n        <label> Username:\r\n            <div style={{display: \"flex\"}}>@<input \r\n                type=\"text\"\r\n                style={{flexGrow:1}} \r\n                placeholder={u.username||\"\"}\r\n                onChange={onChange}\r\n                value={changes.username||\"\"}\r\n                name=\"username\"\r\n                disabled={loading}\r\n            ></input></div>\r\n        </label>\r\n        <label> Clear Name:\r\n            <input type=\"text\" \r\n                name=\"clearname\" \r\n                placeholder={u.clearname||u.username||\"\"}\r\n                onChange={onChange}\r\n                value={changes.clearname||\"\"}\r\n                disabled={loading}\r\n            ></input>\r\n        </label>\r\n        <label> Profile Picture (direct link to image):\r\n            <FallbackImgImg src={u.avatarUrl} ></FallbackImgImg> {/*<img src={u.avatarUrl} alt=\"avatar\"/>*/}\r\n            <input type=\"text\"  \r\n                style={{width: \"calc( 100% - 3.5em)\"}}\r\n                name=\"avatarUrl\" \r\n                placeholder={u.avatarUrl||\"(none)\"}\r\n                onChange={onChange}\r\n                value={changes.avatarUrl||\"\"}\r\n                disabled={loading}\r\n            ></input>\r\n        </label>\r\n        <label>Description:\r\n            <textarea \r\n                name=\"description\" \r\n                placeholder={u.description||\"(none)\"}\r\n                rows=\"4\" \r\n                autoComplete=\"off\"\r\n                onChange={onChange}\r\n                value={changes.description||\"\"}\r\n                disabled={loading}\r\n            ></textarea>\r\n        </label>\r\n        <button onClick={reset} disabled={loading}>Reset</button>\r\n        <div className={s.submitButton} style={{zIndex:1}}><button disabled={loading}>Save</button></div>\r\n    </form>\r\n}\r\n\r\nfunction LogoutButton(props) {\r\n    const [id, axios] = useIdentity();\r\n\r\n    return <div>\r\n        <div className={s.postButton} style={{zIndex:1}}><button className={s.baseButton} onClick={() => {\r\n            var user = id.users[id.active];\r\n            id.setActive(null);\r\n            id.removeUser(user.username);\r\n            props.modalRef.current.toggleModal();\r\n        }}>Logout</button></div>\r\n        <div className={s.destructiveButton} style={{zIndex:1}}><button className={s.baseButton} onClick={() => {\r\n            console.log(\"logout of all??\")\r\n        }}>Logout</button></div>\r\n    </div>\r\n}\r\n\r\nexport function AccountSettingsButton(props) {\r\n    const [id, axios] = useIdentity();\r\n    const modalRef = useRef();\r\n\r\n    return <>\r\n        <DropdownItem leftIcon={<SettingsIcon/>} text=\"Account Settings\" onClick={() => {\r\n            if(id.active!==null)\r\n                modalRef.current.toggleModal();\r\n            else\r\n                id.toggleModal();\r\n        }}/>\r\n        <Modal ref={modalRef} className={s.accountFormWrap}>\r\n            <div style = {{position: \"absolute\",top: \"2em\",left: \"2em\"}}><EyeOnMount size ={40} baseColor=\"#008c16\" innerColor=\"#00ffab\"/></div>\r\n            <h1 style={{marginTop: \"0px\"}}>Profile</h1>\r\n            <ProfileForm></ProfileForm>\r\n\r\n            <hr style={{width:\" 100%\"}}/>     \r\n            <h1 style={{marginTop: \"0px\"}}>ðŸ›¡ Security Area ðŸ›¡</h1>\r\n            <LogoutButton modalRef={modalRef}/>\r\n            <ul>\r\n                <li>Log out</li>\r\n                <li>End all Sessions</li>\r\n                <li>Change Email</li>\r\n                <li>Change Password</li>\r\n            </ul>\r\n\r\n            <hr style={{width:\" 100%\"}}/>\r\n            <h1 style={{marginTop: \"0px\"}}>ðŸ”¥ Danger Zone ðŸ”¥</h1>\r\n            <ul>\r\n                <li>Deactivate Account</li>\r\n                <li>Delete Account forever</li>\r\n            </ul>\r\n        </Modal>\r\n    </>\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAIA;AACA;AACA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AASA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}