(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{2472:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/places",function(){return r(3436)}])},3436:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(4051),a=r.n(n),c=r(5893),s=r(7294),u=r(1408),l=r(985),i=r(6074),o=r.n(i),f=r(9583);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,a,c,s){try{var u=e[c](s),l=u.value}catch(i){return void r(i)}u.done?t(l):Promise.resolve(l).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var c=e.apply(t,r);function s(e){d(c,n,a,s,u,"next",e)}function u(e){d(c,n,a,s,u,"throw",e)}s(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c=[],s=!0,u=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);s=!0);}catch(l){u=!0,a=l}finally{try{s||null==r.return||r.return()}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(){return(0,c.jsx)(u.A,{children:(0,c.jsx)(m,{})})}function m(){var e=_((0,l.j)(),2),t=e[0],r=e[1],n=(0,s.useState)({}),u=n[0],i=n[1],p=(0,s.useState)(null),d=p[0],v=p[1];(0,s.useEffect)((function(){var e=h(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.get("/place/here");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));t.users[t.active]&&e()}),[t.active,d]);var m=u.pathTo||[];function b(e,t){return y.apply(this,arguments)}function y(){return(y=h(a().mark((function e(n,c){var s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.users[t.active]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,r.get("/place/travel/".concat(n));case 5:s=e.sent,v(c),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(2),!e.t0.response||403!==e.t0.response.status){e.next=15;break}return(u=e.t0.response.data).sendTo&&v(u.sendTo),e.abrupt("return",e.t0.response.data);case 15:v(null);case 16:return e.abrupt("return",s.data);case 17:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return m=m.concat((u.pathFrom||[]).filter((function(e){return!0===e.path.twoWay}))),(0,c.jsxs)("div",{className:o().place,children:[(0,c.jsx)("h1",{children:u.name}),(0,c.jsx)("p",{children:u.description}),(0,c.jsxs)("div",{className:o().pathList,children:[(0,c.jsxs)("b",{children:[(0,c.jsx)(f.apq,{size:"1em"})," Paths:"]}),(0,c.jsx)("div",{children:m.map((function(e,t){return(0,c.jsx)(x,{target:e,nav:b},e.path.id)}))})]})]})}function x(e){var t=e.target,r=(0,s.useRef)(),n=(0,s.useState)(null),u=n[0],l=n[1];function i(){return(i=h(a().mark((function n(){var s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.nav(t.path.id,t.id);case 2:if("travel allowed:"!==(s=n.sent)){n.next=6;break}return l(!1),n.abrupt("return");case 6:(s.veteran||s.gnome||s.stuck)&&(r.current.classList.remove(o().wrong),r.current.offsetWidth,r.current.classList.add(o().wrong),s.stuck&&l((0,c.jsxs)(c.Fragment,{children:["Stuck!",(0,c.jsx)("br",{}),(0,c.jsx)(b,{time:s.stuck.free})]})),s.gnome&&l("No Gnomes!"),s.veteran&&l("only Veterans!"));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,c.jsxs)("div",{className:o().pathEntry,onClick:function(){return i.apply(this,arguments)},"data-expanded":e.disabled,ref:r,children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:t.path.name||"Path"})," ",(0,c.jsx)("span",{children:"to"}),(0,c.jsx)("br",{}),(0,c.jsx)("i",{children:t.name})]}),(0,c.jsx)("p",{className:o().blocked,children:u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f.G5m,{})," ",u]})})]})}function b(e){var t=(0,s.useState)(new Date(e.time)-new Date),r=t[0],n=t[1];(0,s.useEffect)((function(){var t=setInterval((function(){var r=new Date(e.time)-new Date;r>0?n(r):clearInterval(t)}),1e3);return function(){clearInterval(t)}}),[]);var a=Math.floor(r/6e4);r-=6e4*a;var u=Math.floor(r/1e3);return(0,c.jsxs)("span",{children:[a,":",u]})}},6074:function(e){e.exports={card:"place_card__fO66L",animCard:"place_animCard__SBMty",pathEntry:"place_pathEntry__QBKmT",fallbackImg:"place_fallbackImg__D6O9e",cardEntrance:"place_cardEntrance__6vl5Z",entering:"place_entering___nf1Q",cardboardEntrance:"place_cardboardEntrance__GRSLz",list:"place_list__VZGqq",place:"place_place___f2Yt",fabulous:"place_fabulous__l0Bhs",scroll:"place_scroll__mZzss",centerAbsolute:"place_centerAbsolute__VfWLM",wrong:"place_wrong__14AID",redflash:"place_redflash__fxklY",blocked:"place_blocked__JlAzc",pathList:"place_pathList__8CVTD"}}},function(e){e.O(0,[445,937,228,249,373,949,607,408,774,888,179],(function(){return t=2472,e(e.s=t);var t}));var t=e.O();_N_E=t}]);