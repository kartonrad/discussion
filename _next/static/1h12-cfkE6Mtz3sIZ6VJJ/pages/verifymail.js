(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"2ru2":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verifymail",function(){return n("R3Ti")}])},R3Ti:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n("o0o1"),r=n.n(a),o=n("q1tI"),s=n.n(o),u=n("v0uu"),i=n("5RVO"),c=n.n(i),l=n("mgzo"),d=n.n(l),h=n("80PL"),p=s.a.createElement;function m(){var e=Object(o.useState)({token:"",action:""}),t=e[0],n=e[1],a=Object(o.useState)(""),s=a[0],i=a[1],l=Object(o.useState)(!1),m=l[0],f=l[1];function y(){var e;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return f(!0),n.next=3,r.a.awrap(fetch(u.a+"/verifymail/"+t.action,{method:"post",body:"token="+encodeURIComponent(t.token),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}));case 3:e=n.sent,console.log(e),n.t0=e.status,n.next=200===n.t0?8:422===n.t0?10:401===n.t0?12:403===n.t0?14:500===n.t0?16:18;break;case 8:return i("DONE \u2705"),n.abrupt("break",18);case 10:return i("There is something wron here...\nDOn'T play games with me"),n.abrupt("break",18);case 12:return i("You're unauthorized to do that...\nEither the token expired,\n the user was already deleted,\n or the token is forged"),n.abrupt("break",18);case 14:return i("The User has since changed their email adress,\nOR he has already verified this adress.\n\nYou need to jump through the normal hoops,\nshould you want to delete it. "),n.abrupt("break",18);case 16:return i("Woopsie poopsie there was a server error\nmy bad"),n.abrupt("break",18);case 18:f(!1);case 19:case"end":return n.stop()}}),null,null,null,Promise)}Object(o.useEffect)((function(){var e=new URL(window.location);n({token:e.searchParams.get("token"),action:e.searchParams.get("a")}),history.replaceState(null,"If this shows up in your browser history, contact support@kartonrad.de",e.origin+e.pathname+e.hash)}),[]),console.log(t);var k=t.action;return p(h.a,{title:"Discussion",disablePopup:!0},p("div",{className:c.a.card+" "+d.a.registerForm,style:{flexDirection:"column",padding:"3em",borderRadius:"4em",margin:"auto",width:"max-content"}},s?p("p",{style:{whiteSpace:"pre-wrap"}},s):"verify"===k?p(w,{act:y,l:m}):"delete"===k?p(b,{act:y,l:m}):p("p",null,"Wait a sec..")))}function b(e){return p(s.a.Fragment,null,p("h1",null,"Revenge \ud83d\ude20"),p("p",null,"Someone really commited crimes in your name, huh?",p("br",null),"Do you want to delete their account to clear your name?"),p("p",null,"If not, just close this Tab!"),p("div",{className:d.a.destructiveButton},p("button",{className:d.a.baseButton,onClick:e.act,disabled:e.l},"BURN IT \ud83d\udd25")))}function w(e){return p(s.a.Fragment,null,p("h1",null,"Confirm"),p("p",null,"Just click one more time..."),p("p",null,"If you changed your mind, just close this Tab!"),p("div",{className:d.a.submitButton},p("button",{type:"submit",onClick:e.act,disabled:e.l},"Verify \u2705")))}}},[["2ru2",0,1,3,4,6,2,5,7,8,9,10]]]);